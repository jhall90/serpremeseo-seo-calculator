const S = `<div class="calculator">\r
    <div class="left-panel">\r
        <div class="left-panel-inner">\r
\r
            <button class="theme-toggle" type="button">\r
                Toggle Theme\r
            </button>\r
\r
            <h1>SEO Pricing Calculator</h1>\r
\r
            <!-- PAGE UPDATES -->\r
            <div class="input-row">\r
                <label for="pageUpdates" class="label-with-info">\r
                    Page Updates ($425 / page)\r
\r
                    <span\r
                        class="info-icon info-margin"\r
                        tabindex="0"\r
                        role="button"\r
                        aria-label="More information about page update pricing"\r
                        aria-describedby="pageUpdateTooltip"\r
                        >\r
                        <span class="info-i">i</span>\r
                        <span \r
                            class="tooltip" \r
                            id="pageUpdateTooltip"\r
                            role="tooltip"\r
                        >\r
                            Bulk discounts apply automatically:<br><br>\r
                            • 1–39 pages: 0% off<br>\r
                            • 40–99 pages: 5% off<br>\r
                            • 100+ pages: 10% off\r
                        </span>\r
                    </span>\r
                </label>\r
\r
                <div class="number-control">\r
                    <input\r
                        type="number"\r
                        id="pageUpdates"\r
                        min="0"\r
                        value="0"\r
                        inputmode="numeric"\r
                    />\r
\r
                    <!-- mouse-only steppers -->\r
                    <div class="stepper" aria-hidden="true">\r
                        <button type="button" data-step="up" tabindex="-1">▲</button>\r
                        <button type="button" data-step="down" tabindex="-1">▼</button>\r
                    </div>\r
                </div>\r
\r
                <div class="page-update-mode label-with-info">\r
                    <label>\r
                        <input\r
                            type="radio"\r
                            name="pageUpdateMode"\r
                            value="monthly"\r
                            checked\r
                        />\r
                        Monthly\r
                    </label>\r
\r
                    <label>\r
                        <input\r
                            type="radio"\r
                            name="pageUpdateMode"\r
                            value="one"\r
                        />\r
                        One-Time\r
                    </label>\r
\r
                    <span\r
                        id="radio-btn-tooltip"\r
                        class="info-icon"\r
                        tabindex="0"\r
                        role="button"\r
                        aria-label="More information about page update billing"\r
                        aria-describedby="pageUpdateRadioTooltip"\r
                    >\r
                        <span class="info-i">i</span>\r
                        <span \r
                            class="tooltip" \r
                            id="pageUpdateRadioTooltip" \r
                            role="tooltip"\r
                        >\r
                            Monthly option will also receive term length discounts.<br>\r
                            One-time will only receive bulk discounts.\r
                        </span>\r
                    </span>\r
                </div>\r
            </div>\r
\r
            <!-- BLOGS -->\r
            <div class="input-row">\r
                <label for="blogs">Blogs ($375 each)</label>\r
                <select id="blogs">\r
                    <option value="0">None</option>\r
                    <option value="2">2</option>\r
                    <option value="4">4</option>\r
                    <option value="6">6</option>\r
                </select>\r
            </div>\r
\r
            <!-- VIDEOS -->\r
            <div class="input-row">\r
                <label for="videos">Videos ($675 each)</label>\r
                <select id="videos">\r
                    <option value="0">None</option>\r
                    <option value="2">2</option>\r
                    <option value="4">4</option>\r
                    <option value="6">6</option>\r
                </select>\r
            </div>\r
\r
            <!-- BACKLINKS -->\r
            <div class="input-row">\r
                <label for="backlinks">Backlinks ($625 each for 60+ DA)</label>\r
                <select id="backlinks">\r
                    <option value="0">None</option>\r
                    <option value="1">1</option>\r
                    <option value="2">2</option>\r
                    <option value="4">4</option>\r
                </select>\r
            </div>\r
\r
            <!-- TECH SEO -->\r
            <div class="input-row">\r
                <label for="techSeo">Technical SEO ($600 / month)</label>\r
                <select id="techSeo">\r
                    <option value="no">No</option>\r
                    <option value="yes">Yes</option>\r
                </select>\r
            </div>\r
\r
            <!-- REPORTING -->\r
            <div class="input-row">\r
                <label for="reporting">Reporting & Analytics</label>\r
                <select id="reporting">\r
                    <option value="none">None</option>\r
                    <option value="one">One-Time ($1,000)</option>\r
                    <option value="monthly">Monthly ($600 / mo)</option>\r
                    <option value="quarterly">Quarterly ($333 / mo)</option>\r
                </select>\r
            </div>\r
\r
            <!-- CONTRACT -->\r
            <div class="input-row">\r
                <label for="contractLength">Contract Length</label>\r
                <select id="contractLength">\r
                    <option value="1">One Month</option>\r
                    <option value="3">3 Months (5% Off)</option>\r
                    <option value="6" selected>6 Months (10% Off)</option>\r
                    <option value="12">12 Months (15% Off)</option>\r
                </select>\r
            </div>\r
\r
        </div>\r
    </div>\r
\r
    <!-- RIGHT PANEL -->\r
    <div class="right-panel">\r
        <div class="summary">\r
            <h2 id="monthlyHeading">Estimated Monthly Cost</h2>\r
            <!-- aria-live="polite" will automatically read the text when it is updated -->\r
            <h1\r
                id="monthlyCost"\r
                aria-live="polite"\r
                aria-labelledby="monthlyHeading"\r
            >$0</h1>\r
\r
            <h2 id="oneTimeHeading">One-Time Costs</h2>\r
            <h1\r
                id="oneTimeCost"\r
                aria-live="polite"\r
                aria-labelledby="oneTimeHeading"\r
            >\r
            $0\r
            </h1>\r
\r
            <ul class="summary-list">\r
                <li>Page Updates: <span id="pagesLabel"></span></li>\r
                <li>Blogs: <span id="blogsLabel"></span></li>\r
                <li>Videos: <span id="videosLabel"></span></li>\r
                <li>Backlinks: <span id="backlinksLabel"></span></li>\r
                <li>Technical SEO: <span id="techLabel"></span></li>\r
                <li>Reporting: <span id="reportingLabel"></span></li>\r
                <li>Contract: <span id="termLabel"></span></li>\r
            </ul>\r
        </div>\r
\r
        <div class="chart-wrap">\r
            <canvas id="paymentChart"></canvas>\r
        </div>\r
\r
        <div class="legend">\r
            <span><i class="dot onpage"></i> On-Page</span>\r
            <span><i class="dot tech"></i> Technical</span>\r
            <span><i class="dot offpage"></i> Off-Page</span>\r
            <span><i class="dot reporting"></i> Reporting</span>\r
        </div>\r
    </div>\r
</div>\r
`, O = ":host{display:block;font-family:var(--font-family, system-ui);font-size:16px;container-type:inline-size;container-name:seo-calculator;--font-xs: .75rem;--font-sm: .875rem;--font-md: 1rem;--font-lg: 1.25rem;--font-xl: 2rem;--ui-option-font-size: .875rem;--brand-top: #1f2937;--brand-bottom: #1f2937;--chart-onpage: #64748b;--chart-tech: #94a3b8;--chart-offpage: #cbd5e1;--chart-reporting: #e2e8f0;--bg-light: #ffffff;--panel-light: #f8fafc;--text-light: #0f172a;--bg-dark: #0f172a;--panel-dark: #1e293b;--text-dark: #f8fafc}:host(.branding-brand){--brand-top: #0e2a59;--brand-bottom: #0e2a59;--chart-onpage: #00cc66;--chart-tech: #ff6a00;--chart-offpage: #ffcc00;--chart-reporting: #7dd3fc}:host(.branding-minimal.dark){--brand-top: #1c1f24;--brand-bottom: #1c1f24;--panel-dark: #1f2329;--bg-dark: #14161a;--text-dark: #f1f5f9;--chart-onpage: #9aa0aa;--chart-tech: #9aa0aa;--chart-offpage: #b6bcc7;--chart-reporting: #d1d5db}:host(.branding-off){--brand-top: var(--panel-dark);--brand-bottom: var(--panel-dark);--chart-onpage: #747a85;--chart-tech: #9ca3af;--chart-offpage: #4e5664;--chart-reporting: #26282b}.calculator{display:flex;max-width:1100px;margin:0 auto;padding:2cqw;border-radius:1.25rem;background:var(--panel-light);color:var(--text-light);overflow:hidden}:host(.dark) .calculator{background:var(--panel-dark);color:var(--text-dark)}@container seo-calculator (max-width: 600px){.calculator{flex-direction:column;padding:1.5cqw;--font-xs: .875rem;--font-sm: 1rem;--font-md: 1.125rem;--font-lg: 1.375rem;--font-xl: 2.25rem;--ui-option-font-size: 1.05rem}}@container seo-calculator (min-width: 601px) and (max-width: 1024px){.calculator{flex-direction:column;--font-xs: .8125rem;--font-sm: .9375rem;--font-md: 1.0625rem;--font-lg: 1.3125rem;--font-xl: 2.125rem;--ui-option-font-size: 1.05rem}}.left-panel{flex:1;padding-right:2cqw}.left-panel .left-panel-inner{width:90%;max-width:42rem;margin-inline:auto}.left-panel .left-panel-inner h1{text-align:center}@container seo-calculator (max-width: 1024px){.left-panel{width:100%}}.right-panel{width:22.5rem;padding:2cqw;border-radius:.75rem;color:#fff;background:linear-gradient(180deg,var(--brand-top),var(--brand-bottom))}@container seo-calculator (max-width: 1024px){.right-panel{width:100%;padding:0cqw}}.theme-toggle{margin-bottom:1.25rem;padding:.5rem 1rem;border-radius:.375rem;border:1px solid rgba(0,0,0,.2);background:var(--panel-light);color:var(--text-light);font-size:var(--font-sm);font-weight:500;cursor:pointer;width:fit-content}:host(.dark) .theme-toggle{background:var(--panel-dark);color:var(--text-dark);border-color:#ffffff40}.theme-toggle:focus-visible{outline:2px solid currentColor;outline-offset:2px}.summary{display:flex;flex-direction:column;gap:.75rem}.summary h2{margin:.5rem 0 .25rem;font-size:var(--font-lg);font-weight:600;text-align:center}.summary h1{margin:0 0 1rem;font-size:var(--font-xl);font-weight:700;text-align:center}.summary .summary-list{list-style:none;margin-top:.75rem;padding:0;display:flex;flex-direction:column;gap:.5rem}.summary .summary-list li{display:flex;justify-content:space-between;font-size:var(--ui-option-font-size)}@container seo-calculator (max-width: 600px){.summary{padding:4cqw}}.input-row{margin-bottom:1.25rem;position:relative;z-index:1;isolation:isolate}.input-row:has(.info-icon:hover),.input-row:has(.info-icon:focus-visible){z-index:10}.input-row label{font-size:var(--ui-option-font-size);font-weight:500;line-height:1.6;opacity:.9;display:block;margin-bottom:.25rem}.input-row .page-update-mode{display:flex;gap:1.25rem;margin-top:.75rem;align-items:center;position:relative;z-index:1}.input-row .page-update-mode label{display:inline-flex;align-items:center;gap:.5rem;font-size:var(--ui-option-font-size);cursor:pointer;white-space:nowrap}.input-row .page-update-mode input[type=radio]{width:auto;height:auto;margin:0;padding:0;appearance:auto;cursor:pointer}.input-row .page-update-mode #radio-btn-tooltip{margin-bottom:.25rem}.input-row input[type=number]::-webkit-inner-spin-button,.input-row input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.input-row input[type=number]{appearance:textfield;-moz-appearance:textfield}.input-row input:not([type=radio]):not([type=checkbox]),.input-row select{width:100%;height:2.75rem;padding:.5rem .75rem;border-radius:.5rem;box-sizing:border-box;background:var(--panel-light);color:var(--text-light);border:1px solid rgba(0,0,0,.15);font-size:var(--ui-option-font-size);appearance:none}:host(.dark) .input-row input:not([type=radio]):not([type=checkbox]),:host(.dark) .input-row select{background:var(--panel-dark);color:var(--text-dark);border-color:#ffffff40}.input-row select option{background:var(--panel-light);color:var(--text-light)}:host(.dark) .input-row select option{background:var(--panel-dark);color:var(--text-dark)}.number-control{position:relative;width:100%}.number-control input{width:100%;padding-right:3rem}.number-control .stepper{position:absolute;top:50%;right:.5rem;transform:translateY(-50%);display:flex;flex-direction:column;gap:.15rem;z-index:2}.number-control .stepper button{all:unset;cursor:pointer;line-height:1;padding:.15rem .35rem;font-size:.75rem;font-weight:600;color:currentColor;opacity:.7;-webkit-user-select:none;user-select:none}.number-control .stepper button:hover{opacity:1}.number-control .stepper button:active{transform:scale(.95)}.label-with-info{display:inline-flex;align-items:center;gap:.375rem;position:relative;z-index:5}.label-with-info .info-icon{z-index:6;display:inline-flex;align-items:center;justify-content:center;width:1.1rem;height:1.1rem;border-radius:50%;background:#00000014;color:#111;font-size:.7rem;font-weight:700;line-height:1;cursor:pointer;-webkit-user-select:none;user-select:none}:host(.dark) .label-with-info .info-icon{background:#ffffff4d;color:#fff}.label-with-info .info-icon .info-i{display:inline-block;transform:translateY(-.5px)}.label-with-info .info-margin{margin-left:1rem}.label-with-info .tooltip{position:absolute;top:calc(100% + .5rem);left:50%;transform:translate(-50%);min-width:14rem;max-width:22rem;padding:.75rem 1rem;border-radius:.5rem;background:#0f172a;color:#fff;font-size:.75rem;line-height:1.4;white-space:normal;text-align:left;opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:999}@container seo-calculator (max-width: 600px){.label-with-info .tooltip{left:50%;right:auto;transform:translate(-50%);max-width:calc(100vw - 2rem);box-sizing:border-box}}.label-with-info .info-icon:hover .tooltip,.label-with-info .info-icon:focus-visible .tooltip{opacity:1}.label-with-info .info-icon:focus-visible{outline:2px solid currentColor;outline-offset:2px}.chart-wrap{max-width:18rem;margin:1.25rem auto 0}@container seo-calculator (max-width: 600px){.chart-wrap{max-width:26rem;padding-inline:4cqw}}.chart-wrap canvas{width:100%;aspect-ratio:1/1}.legend{display:grid;grid-template-columns:repeat(auto-fit,minmax(8rem,1fr));gap:.5rem;margin:.75rem;justify-items:center}.legend span{display:flex;align-items:center;gap:.375rem}.legend .dot{width:.625rem;height:.625rem;border-radius:50%}.legend .dot.onpage{background:var(--chart-onpage)}.legend .dot.tech{background:var(--chart-tech)}.legend .dot.offpage{background:var(--chart-offpage)}.legend .dot.reporting{background:var(--chart-reporting)}@container seo-calculator (max-width: 600px){.legend{grid-template-columns:repeat(2,1fr)}}@media(max-width:600px){.calculator{flex-direction:column}}", E = "1.0.0", C = {
  // Full control (publishers can theme everything)
  brand: [
    "--brand-top",
    "--brand-bottom",
    "--chart-onpage",
    "--chart-tech",
    "--chart-offpage",
    "--chart-reporting",
    "--bg-light",
    "--panel-light",
    "--text-light",
    "--bg-dark",
    "--panel-dark",
    "--text-dark",
    "--font-family",
    "--ui-option-font-size"
  ],
  // Controlled theming (keeps widget mostly consistent)
  minimal: ["--brand-top", "--brand-bottom", "--font-family", "--text-light"],
  // Neutral publisher mode (no overrides allowed)
  off: []
};
class z extends HTMLElement {
  static get observedAttributes() {
    return [
      "branding",
      "brand-top",
      "brand-bottom",
      "chart-onpage",
      "chart-tech",
      "chart-offpage",
      "chart-reporting",
      "font-family",
      "bg-light",
      "panel-light",
      "text-light",
      "bg-dark",
      "panel-dark",
      "text-dark",
      "ui-option-font-size",
      "theme"
      // Note: "style" is not observed; Elementor inline styles won't trigger attributeChangedCallback anyway.
      // We parse inline style in _applyOverrides() on connect + when observed attrs change.
    ];
  }
  constructor() {
    super(), this._chart = null, this._currentTotal = 0, this._brandingLocked = !1, this._lastUpdateKey = "";
  }
  connectedCallback() {
    this._cacheDom(), this._applyBrandingMode(), this._applyOverrides(), this._syncNativeOptionFontSize(), this._initThemeListener(), this._updateThemeClass(), this._brandingLocked = !0, window.addEventListener(
      "resize",
      () => this._syncNativeOptionFontSize()
    ), this._loadChartJs().then(() => {
      this._initChart(), this._attachEvents(), this._updateCalculator(), this._appendAttribution(), this._emitReadyEvent();
    });
  }
  attributeChangedCallback(t, e, n) {
    if (e !== n) {
      if (t === "branding") {
        if (this._brandingLocked)
          return;
        this._applyBrandingMode();
      }
      t === "theme" && this._updateThemeClass(), this._applyOverrides(), this._updateChartColors(), (t === "font-family" || t === "ui-option-font-size") && this._syncNativeOptionFontSize();
    }
  }
  /* =====================
    DOM
  ===================== */
  _cacheDom() {
    const t = this.shadowRoot;
    this.$pageUpdates = t.getElementById("pageUpdates"), this.$pageUpdateMode = t.querySelectorAll(
      'input[name="pageUpdateMode"]'
    ), this.$blogs = t.getElementById("blogs"), this.$videos = t.getElementById("videos"), this.$backlinks = t.getElementById("backlinks"), this.$techSeo = t.getElementById("techSeo"), this.$reporting = t.getElementById("reporting"), this.$contractLength = t.getElementById("contractLength"), this.$monthlyCost = t.getElementById("monthlyCost"), this.$oneTimeCost = t.getElementById("oneTimeCost"), this.$pagesLabel = t.getElementById("pagesLabel"), this.$blogsLabel = t.getElementById("blogsLabel"), this.$videosLabel = t.getElementById("videosLabel"), this.$backlinksLabel = t.getElementById("backlinksLabel"), this.$techLabel = t.getElementById("techLabel"), this.$reportingLabel = t.getElementById("reportingLabel"), this.$termLabel = t.getElementById("termLabel"), this.$chartCanvas = t.getElementById("paymentChart"), this.$themeToggle = t.querySelector(".theme-toggle");
  }
  /* =====================
    CSS VARS / OVERRIDES
  ===================== */
  _applyPageCssVars(t) {
    const e = getComputedStyle(document.documentElement);
    t.forEach((n) => {
      const a = e.getPropertyValue(n).trim();
      a && this.style.setProperty(n, a);
    });
  }
  _applyBrandingMode() {
    const t = this.getAttribute("branding"), e = ["brand", "minimal", "off"].includes(t) ? t : "brand";
    if (this.classList.remove(
      "branding-brand",
      "branding-minimal",
      "branding-off"
    ), this.classList.add(`branding-${e}`), e !== "brand") {
      const n = C[e] || [];
      C.brand.forEach((s) => {
        n.includes(s) || this.style.removeProperty(s);
      });
    }
  }
  // _applyBrandingMode() {
  //     const raw = this.getAttribute("branding");
  //     const mode = ["brand", "minimal", "off"].includes(raw) ? raw : "brand";
  //     this.classList.remove(
  //         "branding-brand",
  //         "branding-minimal",
  //         "branding-off",
  //     );
  //     this.classList.add(`branding-${mode}`);
  // }
  _appendAttribution() {
    if ((this.getAttribute("branding") || "brand") === "off") return;
    const e = document.createElement("div");
    e.setAttribute("part", "attribution"), e.style.marginTop = "0.75rem", e.style.fontSize = "0.75rem", e.style.textAlign = "center", e.style.opacity = "0.7", e.innerHTML = `
        <a
            href="https://serpremeseo.com/seo-calculator/"
            target="_blank"
            rel="nofollow sponsored"
        >
            SEO Pricing Calculator by SERPreme SEO
        </a>
        `, this.shadowRoot.appendChild(e);
  }
  _applyOverrides() {
    const t = this.getAttribute("branding"), e = ["brand", "minimal", "off"].includes(t) ? t : "brand", n = C[e] || [];
    this._applyPageCssVars(n);
    const a = /* @__PURE__ */ new Set([
      "brand-top",
      "brand-bottom",
      "chart-onpage",
      "chart-tech",
      "chart-offpage",
      "chart-reporting",
      "bg-light",
      "panel-light",
      "text-light",
      "bg-dark",
      "panel-dark",
      "text-dark",
      "font-family",
      "ui-option-font-size"
    ]);
    [...this.attributes].forEach((i) => {
      if (!a.has(i.name)) return;
      const r = `--${i.name}`;
      n.includes(r) && this.style.setProperty(r, i.value);
    });
    const s = this.getAttribute("style");
    s && s.split(";").forEach((i) => {
      const r = i.indexOf(":");
      if (r === -1) return;
      const o = i.slice(0, r).trim(), c = i.slice(r + 1).trim();
      !o || !c || o.startsWith("--") && n.includes(o) && this.style.setProperty(o, c);
    });
  }
  _css(t) {
    return getComputedStyle(this).getPropertyValue(t).trim();
  }
  /* =====================
    EVENTS
  ===================== */
  _emitReadyEvent() {
    const t = this.getAttribute("branding"), e = ["brand", "minimal", "off"].includes(t) ? t : "brand";
    this.dispatchEvent(
      new CustomEvent("seo-calculator:ready", {
        bubbles: !0,
        composed: !0,
        detail: {
          branding: e,
          theme: this.getAttribute("theme") || "system",
          version: E
        }
      })
    );
  }
  _emitUpdateEvent(t) {
    const e = JSON.stringify(t);
    e !== this._lastUpdateKey && (this._lastUpdateKey = e, this.dispatchEvent(
      new CustomEvent("seo-calculator:update", {
        bubbles: !0,
        composed: !0,
        detail: {
          ...t,
          branding: this.getAttribute("branding") || "brand",
          theme: this.getAttribute("theme") || "system",
          version: E
        }
      })
    ));
  }
  /* =====================
    FONT SYNC
  ===================== */
  _syncNativeOptionFontSize() {
    if (this._css("--ui-option-font-size")) return;
    const e = document.createElement("select");
    e.size = 2, e.style.position = "absolute", e.style.left = "-9999px", e.style.visibility = "hidden", e.style.fontFamily = this._css("--font-family") || "system-ui";
    const n = document.createElement("option");
    n.textContent = "Monthly ($600 / mo)", e.appendChild(n), this.shadowRoot.appendChild(e);
    const a = getComputedStyle(n).fontSize;
    e.remove(), a && this.style.setProperty("--ui-option-font-size", a);
  }
  /* =====================
    THEME
  ===================== */
  _initThemeListener() {
    this.$themeToggle && this.$themeToggle.addEventListener("click", () => {
      const t = this.getAttribute("theme") || "system", e = t === "light" ? "dark" : t === "dark" ? "system" : "light";
      this.setAttribute("theme", e), this._updateThemeClass();
    });
  }
  _updateThemeClass() {
    const t = this.getAttribute("theme") || "system", e = window.matchMedia(
      "(prefers-color-scheme: dark)"
    ).matches, n = t === "dark" ? !0 : t === "light" ? !1 : e;
    this.classList.toggle("dark", n);
  }
  /* =====================
    CHART
  ===================== */
  _loadChartJs() {
    return window.Chart ? Promise.resolve() : new Promise((t) => {
      const e = document.createElement("script");
      e.src = "https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js", e.onload = t, document.head.appendChild(e);
    });
  }
  _centerTextPlugin = {
    id: "centerText",
    afterDraw: (t) => {
      const { ctx: e, chartArea: n } = t, a = t.$centerText;
      if (!a?.length) return;
      const s = n.left + n.width / 2, i = n.top + n.height / 2;
      e.save(), e.textAlign = "center", e.textBaseline = "middle", a.forEach((r, o) => {
        e.font = r.font, e.fillStyle = r.color || "#fff", e.fillText(r.text, s, i + (o - 0.5) * 22);
      }), e.restore();
    }
  };
  _initChart() {
    this._chart = new Chart(this.$chartCanvas, {
      type: "doughnut",
      plugins: [this._centerTextPlugin],
      data: {
        labels: ["On-Page", "Technical", "Off-Page", "Reporting"],
        datasets: [
          {
            data: [0, 0, 0, 0],
            backgroundColor: [
              this._css("--chart-onpage"),
              this._css("--chart-tech"),
              this._css("--chart-offpage"),
              this._css("--chart-reporting")
            ],
            borderWidth: 0
          }
        ]
      },
      options: {
        cutout: "70%",
        plugins: { legend: !1, tooltip: !1 },
        onHover: (t, e) => {
          e.length ? this._updateCenterForSlice(e[0].index) : this._updateCenterDefault();
        }
      }
    }), this._updateCenterDefault();
  }
  _updateCenterForSlice(t) {
    const e = this._chart.data.datasets[0].data, n = e.reduce((i, r) => i + r, 0);
    if (!n) return;
    const a = Math.round(e[t] / n * 100), s = this._chart.data.labels[t];
    this._chart.$centerText = [
      { text: `${a}%`, font: "700 26px sans-serif" },
      {
        text: s,
        font: "500 18px sans-serif",
        color: "rgba(255,255,255,.8)"
      }
    ], this._chart.draw();
  }
  _updateCenterDefault() {
    this._chart.$centerText = [
      {
        text: `$${this._currentTotal.toLocaleString()}`,
        font: "700 26px sans-serif"
      },
      {
        text: "/mo",
        font: "500 16px sans-serif",
        color: "rgba(255,255,255,.8)"
      }
    ], this._chart.draw();
  }
  _updateChartColors() {
    this._chart && (this._chart.data.datasets[0].backgroundColor = [
      this._css("--chart-onpage"),
      this._css("--chart-tech"),
      this._css("--chart-offpage"),
      this._css("--chart-reporting")
    ], this._chart.update());
  }
  /* =====================
    CALCULATOR
  ===================== */
  _attachEvents() {
    [
      this.$pageUpdates,
      this.$blogs,
      this.$videos,
      this.$backlinks,
      this.$techSeo,
      this.$reporting,
      this.$contractLength
    ].forEach(
      (t) => t.addEventListener("input", () => this._updateCalculator())
    ), this.$pageUpdateMode.forEach((t) => {
      t.addEventListener("change", () => this._updateCalculator());
    }), this.shadowRoot.querySelectorAll("[data-step]").forEach((t) => {
      t.addEventListener("click", () => {
        const e = t.closest(".number-control").querySelector("input"), n = t.dataset.step === "up" ? 1 : -1;
        e.value = Math.max(0, Number(e.value) + n), this._updateCalculator();
      });
    });
  }
  _updateCalculator() {
    const i = {
      1: 0,
      3: 0.05,
      6: 0.1,
      12: 0.15
    }, r = (l) => l >= 100 ? 0.1 : l >= 40 ? 0.05 : 0, o = Number(this.$pageUpdates.value) || 0, c = Number(this.$blogs.value) || 0, p = Number(this.$videos.value) || 0, h = Number(this.$backlinks.value) || 0, u = Number(this.$contractLength.value), m = [...this.$pageUpdateMode].find(
      (l) => l.checked
    )?.value;
    let g = 0;
    if (m === "one") {
      let l = o * 425;
      l *= 1 - r(o), g += l;
    }
    this.$reporting.value === "one" && (g += 1e3);
    const _ = `$${Math.round(g).toLocaleString()}`;
    this.$oneTimeCost.textContent !== _ && (this.$oneTimeCost.textContent = _);
    let b = 0;
    if (m === "monthly") {
      let l = o * 425;
      l *= 1 - r(o), b += l;
    }
    b += c * 375;
    const T = this.$techSeo.value === "yes" ? 600 : 0, L = p * 675 + h * 625;
    let f = 0;
    this.$reporting.value === "monthly" && (f = 600), this.$reporting.value === "quarterly" && (f = 333);
    const d = i[u] || 0, y = Math.ceil(b * (1 - d)), v = Math.ceil(T * (1 - d)), x = Math.ceil(L * (1 - d)), w = f > 0 ? Math.ceil(f * (1 - d)) : 0, k = y + v + x + w;
    this._currentTotal = k;
    const $ = `$${k.toLocaleString()}`;
    this.$monthlyCost.textContent !== $ && (this.$monthlyCost.textContent = $), this.$pagesLabel.textContent = o > 0 ? m === "monthly" ? `${o} pages / month` : `${o} pages (one-time)` : "None", this.$blogsLabel.textContent = c > 0 ? `${c} / month` : "None", this.$videosLabel.textContent = p > 0 ? `${p} / month` : "None", this.$backlinksLabel.textContent = h > 0 ? `${h} links` : "None", this.$techLabel.textContent = this.$techSeo.value === "yes" ? "$600 / month" : "None", this.$reportingLabel.textContent = this.$reporting.value === "one" ? "One-Time ($1,000)" : this.$reporting.value === "monthly" ? "Monthly ($600 / mo)" : this.$reporting.value === "quarterly" ? "Quarterly ($333 / mo)" : "None", this.$termLabel.textContent = u === 1 ? "One Month" : `${u} Months`, this._updateChartData(y, v, x, w), this._emitUpdateEvent({
      totals: {
        monthly: k,
        oneTime: Math.round(g)
      },
      breakdown: { onPage: y, tech: v, offPage: x, reporting: w },
      inputs: {
        pages: o,
        pageMode: m,
        blogs: c,
        videos: p,
        backlinks: h,
        techSeo: this.$techSeo.value,
        reporting: this.$reporting.value,
        term: u,
        discount: d
      }
    });
  }
  _updateChartData(t, e, n, a) {
    this._chart && (this._chart.data.datasets[0].data = [t, e, n, a], this._chart.update(), this._updateCenterDefault());
  }
}
customElements.get("seo-calculator") || customElements.define(
  "seo-calculator",
  class extends z {
    connectedCallback() {
      this.shadowRoot || this.attachShadow({ mode: "open" }), this.shadowRoot.innerHTML || (this.shadowRoot.innerHTML = `
                        <style>${O}</style>
                        ${S}
                    `), super.connectedCallback();
    }
  }
);
