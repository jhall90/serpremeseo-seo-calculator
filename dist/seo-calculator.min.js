const T = `<div class="calculator">\r
    <div class="left-panel">\r
        <button class="theme-toggle">Toggle Theme</button>\r
        <h1>SEO Pricing Calculator</h1>\r
\r
        <div class="input-row">\r
            <label class="label-with-info">\r
                Page Updates ($425 / page)\r
                <span class="info-icon" tabindex="0">\r
                    <span class="info-i">i</span>\r
                    <span class="tooltip">\r
                        Bulk discounts apply automatically:<br><br>\r
                        • 20–39 pages: 0% off<br>\r
                        • 40–99 pages: 5% off<br>\r
                        • 100+ pages: 10% off\r
                    </span>\r
                </span>\r
            </label>\r
            <input type="number" id="pageUpdates" min="0" value="0">\r
        </div>\r
\r
        <div class="input-row">\r
            <label>Blogs ($375 each)</label>\r
            <select id="blogs">\r
                <option value="0">None</option>\r
                <option value="2">2</option>\r
                <option value="4">4</option>\r
                <option value="6">6</option>\r
            </select>\r
        </div>\r
\r
        <div class="input-row">\r
            <label>Videos ($675 each)</label>\r
            <select id="videos">\r
                <option value="0">None</option>\r
                <option value="2">2</option>\r
                <option value="4">4</option>\r
                <option value="6">6</option>\r
            </select>\r
        </div>\r
\r
        <div class="input-row">\r
            <label>Backlinks ($625 each for 60+ DA)</label>\r
            <select id="backlinks">\r
                <option value="0">None</option>\r
                <option value="1">1</option>\r
                <option value="2">2</option>\r
                <option value="4">4</option>\r
            </select>\r
        </div>\r
\r
        <div class="input-row">\r
            <label>Technical SEO ($600 / month)</label>\r
            <select id="techSeo">\r
                <option value="no">No</option>\r
                <option value="yes">Yes</option>\r
            </select>\r
        </div>\r
\r
        <div class="input-row">\r
            <label>Reporting & Analytics</label>\r
            <select id="reporting">\r
                <option value="none">None</option>\r
                <option value="one">One-Time ($1,000)</option>\r
                <option value="monthly">Monthly ($600 / mo)</option>\r
                <option value="quarterly">Quarterly ($333 / mo)</option>\r
            </select>\r
        </div>\r
\r
        <div class="input-row">\r
            <label>Contract Length</label>\r
            <select id="contractLength">\r
                <option value="1">One Month</option>\r
                <option value="3">3 Months (5% Off)</option>\r
                <option value="6" selected>6 Months (10% Off)</option>\r
                <option value="12">12 Months (15% Off)</option>\r
            </select>\r
        </div>\r
    </div>\r
\r
    <div class="right-panel">\r
        <div class="summary">\r
            <h2>Estimated Monthly Cost</h2>\r
            <h1 id="monthlyCost">$0</h1>\r
            <h2>One-Time Costs</h2>\r
            <h1 id="oneTimeCost">$0</h1>\r
            <ul>\r
                <li>Page Updates: <span id="pagesLabel"></span></li>\r
                <li>Blogs: <span id="blogsLabel"></span></li>\r
                <li>Videos: <span id="videosLabel"></span></li>\r
                <li>Backlinks: <span id="backlinksLabel"></span></li>\r
                <li>Technical SEO: <span id="techLabel"></span></li>\r
                <li>Reporting: <span id="reportingLabel"></span></li>\r
                <li>Contract: <span id="termLabel"></span></li>\r
            </ul>\r
        </div>\r
\r
        <div class="chart-wrap">\r
            <canvas id="paymentChart"></canvas>\r
        </div>\r
\r
        <div class="legend">\r
            <span><i class="dot onpage"></i> On-Page</span>\r
            <span><i class="dot tech"></i> Technical</span>\r
            <span><i class="dot offpage"></i> Off-Page</span>\r
            <span><i class="dot reporting"></i> Reporting</span>\r
        </div>\r
\r
    </div>\r
</div>`, L = ":host{display:block;font-family:var(--font-family, system-ui);font-size:16px;container-type:inline-size;container-name:seo-calculator;--font-xs: .75rem;--font-sm: .875rem;--font-md: 1rem;--font-lg: 1.25rem;--font-xl: 2rem;--ui-option-font-size: .875rem;--brand-top: var(--brand-top, #0e2a59);--brand-bottom: var(--brand-bottom, #163a7b);--chart-onpage: var(--chart-onpage, #00cc66);--chart-tech: var(--chart-tech, #ff6a00);--chart-offpage: var(--chart-offpage, #ffcc00);--chart-reporting: var(--chart-reporting, #7dd3fc);--bg-light: var(--bg-light, #ffffff);--panel-light: var(--panel-light, #f8fafc);--text-light: var(--text-light, #111111);--bg-dark: var(--bg-dark, #0f172a);--panel-dark: var(--panel-dark, #1e293b);--text-dark: var(--text-dark, #f1f5f9)}.calculator{display:flex;max-width:1100px;margin:0 auto;padding:2cqw;border-radius:1.25rem;background:var(--panel-light);color:var(--text-light);overflow:hidden}:host(.dark) .calculator{background:var(--panel-dark);color:var(--text-dark)}@container seo-calculator (max-width: 600px){.calculator{flex-direction:column;padding:1.5cqw;--font-xs: .875rem;--font-sm: 1rem;--font-md: 1.125rem;--font-lg: 1.375rem;--font-xl: 2.25rem}}@container seo-calculator (min-width: 601px) and (max-width: 1024px){.calculator{flex-direction:column;--font-xs: .8125rem;--font-sm: .9375rem;--font-md: 1.0625rem;--font-lg: 1.3125rem;--font-xl: 2.125rem}}.left-panel{flex:1;padding-right:2cqw}.left-panel h1{text-align:center}@container seo-calculator (max-width: 1024px){.left-panel{width:100%}}.right-panel{width:22.5rem;padding:2cqw;border-radius:.75rem;color:#fff;background:linear-gradient(180deg,var(--brand-top),var(--brand-bottom))}@container seo-calculator (max-width: 1024px){.right-panel{width:100%;padding:0cqw}}.theme-toggle{margin-bottom:1.25rem;padding:.5rem 1rem;border-radius:.375rem;border:1px solid rgba(0,0,0,.2);background:var(--panel-light);color:var(--text-light);font-size:var(--font-sm);font-weight:500;cursor:pointer;width:fit-content}:host(.dark) .theme-toggle{background:var(--panel-dark);color:var(--text-dark);border-color:#ffffff40}.theme-toggle:focus-visible{outline:2px solid currentColor;outline-offset:2px}.summary{display:flex;flex-direction:column;gap:.75rem}.summary h2{margin:.5rem 0 .25rem;font-size:var(--font-lg);font-weight:600;text-align:center}.summary h1{margin:0 0 1rem;font-size:var(--font-xl);font-weight:700;text-align:center}.summary ul{list-style:none;margin-top:.75rem;padding:0}.summary ul li{display:flex;justify-content:space-between;font-size:var(--ui-option-font-size)}@container seo-calculator (max-width: 600px){.summary{padding:4cqw}}.input-row{margin-bottom:1.25rem;position:relative;z-index:1}.input-row:has(.info-icon:hover),.input-row:has(.info-icon:focus-visible){z-index:10}.input-row label{font-size:var(--ui-option-font-size);font-weight:500;line-height:1.6;opacity:.9;display:block}.input-row input,.input-row select{width:100%;height:2.75rem;padding:.5rem .75rem;border-radius:.5rem;box-sizing:border-box;background:var(--panel-light);color:var(--text-light);border:1px solid rgba(0,0,0,.15);font-size:var(--ui-option-font-size);appearance:none}:host(.dark) .input-row input,:host(.dark) .input-row select{background:var(--panel-dark);color:var(--text-dark);border-color:#ffffff40}.input-row select option{background:var(--panel-light);color:var(--text-light)}:host(.dark) .input-row select option{background:var(--panel-dark);color:var(--text-dark)}.label-with-info{display:flex;align-items:center;gap:.375rem}.label-with-info .info-icon{position:relative}.label-with-info .tooltip{position:absolute;top:calc(100% + .5rem);left:50%;transform:translate(-50%);max-width:min(16rem,90%);padding:.75rem 1rem;border-radius:.5rem;background:#0f172a;color:#fff;font-size:.75rem;line-height:1.4;white-space:normal;text-align:left;opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:20}.label-with-info .info-icon:hover .tooltip,.label-with-info .info-icon:focus-visible .tooltip{opacity:1;transform:translateY(0)}.chart-wrap{max-width:18rem;margin:1.25rem auto 0}@container seo-calculator (max-width: 600px){.chart-wrap{max-width:26rem;padding-inline:4cqw}}.chart-wrap canvas{width:100%;aspect-ratio:1/1}.legend{display:grid;grid-template-columns:repeat(auto-fit,minmax(8rem,1fr));gap:.5rem;margin-top:.75rem;justify-items:center}.legend span{display:flex;align-items:center;gap:.375rem}.legend .dot{width:.625rem;height:.625rem;border-radius:50%}.legend .dot.onpage{background:var(--chart-onpage)}.legend .dot.tech{background:var(--chart-tech)}.legend .dot.offpage{background:var(--chart-offpage)}.legend .dot.reporting{background:var(--chart-reporting)}@container seo-calculator (max-width: 600px){.legend{grid-template-columns:repeat(2,1fr)}}@media(max-width:600px){.calculator{flex-direction:column}}";
class E extends HTMLElement {
  static get observedAttributes() {
    return [
      "brand-top",
      "brand-bottom",
      "chart-onpage",
      "chart-tech",
      "chart-offpage",
      "chart-reporting",
      "font-family",
      "bg-light",
      "panel-light",
      "text-light",
      "bg-dark",
      "panel-dark",
      "text-dark",
      "theme"
    ];
  }
  constructor() {
    super(), this._chart = null, this._currentTotal = 0;
  }
  connectedCallback() {
    this._cacheDom(), this._readPageCssVars(), this._applyAttributeOverrides(), this._syncNativeOptionFontSize(), this._initThemeListener(), this._updateThemeClass(), window.addEventListener(
      "resize",
      () => this._syncNativeOptionFontSize()
    ), this._loadChartJs().then(() => {
      this._initChart(), this._attachEvents(), this._updateCalculator();
    });
  }
  attributeChangedCallback() {
    this._applyAttributeOverrides(), this._updateChartColors();
  }
  /* =====================
      DOM
  ===================== */
  _cacheDom() {
    const t = this.shadowRoot;
    this.$pageUpdates = t.getElementById("pageUpdates"), this.$blogs = t.getElementById("blogs"), this.$videos = t.getElementById("videos"), this.$backlinks = t.getElementById("backlinks"), this.$techSeo = t.getElementById("techSeo"), this.$reporting = t.getElementById("reporting"), this.$contractLength = t.getElementById("contractLength"), this.$monthlyCost = t.getElementById("monthlyCost"), this.$oneTimeCost = t.getElementById("oneTimeCost"), this.$pagesLabel = t.getElementById("pagesLabel"), this.$blogsLabel = t.getElementById("blogsLabel"), this.$videosLabel = t.getElementById("videosLabel"), this.$backlinksLabel = t.getElementById("backlinksLabel"), this.$techLabel = t.getElementById("techLabel"), this.$reportingLabel = t.getElementById("reportingLabel"), this.$termLabel = t.getElementById("termLabel"), this.$chartCanvas = t.getElementById("paymentChart"), this.$themeToggle = t.querySelector(".theme-toggle");
  }
  _readPageCssVars() {
    const t = [
      "--brand-top",
      "--brand-bottom",
      "--chart-onpage",
      "--chart-tech",
      "--chart-offpage",
      "--chart-reporting",
      "--font-family",
      "--bg-light",
      "--panel-light",
      "--text-light",
      "--bg-dark",
      "--panel-dark",
      "--text-dark"
    ], e = getComputedStyle(document.documentElement);
    t.forEach((n) => {
      const a = e.getPropertyValue(n).trim();
      a && this.style.setProperty(n, a);
    });
  }
  _applyAttributeOverrides() {
    [...this.attributes].forEach((t) => {
      const e = "--" + t.name.replace(/-(.)/g, (n, a) => a.toLowerCase());
      this.style.setProperty(e, t.value);
    });
  }
  _css(t) {
    return getComputedStyle(this).getPropertyValue(t).trim();
  }
  /* =====================
      FONT SYNC
  ===================== */
  _syncNativeOptionFontSize() {
    const t = document.createElement("select");
    t.size = 2, t.style.position = "absolute", t.style.left = "-9999px", t.style.visibility = "hidden", t.style.fontFamily = this._css("--font-family") || "system-ui";
    const e = document.createElement("option");
    e.textContent = "Monthly ($600 / mo)", t.appendChild(e), this.shadowRoot.appendChild(t);
    const n = getComputedStyle(e).fontSize;
    t.remove(), n && this.style.setProperty("--ui-option-font-size", n);
  }
  /* =====================
      THEME
  ===================== */
  _initThemeListener() {
    this.$themeToggle.addEventListener("click", () => {
      const t = this.getAttribute("theme") || "system", e = t === "light" ? "dark" : t === "dark" ? "system" : "light";
      this.setAttribute("theme", e), this._updateThemeClass();
    });
  }
  _updateThemeClass() {
    const t = this.getAttribute("theme") || "system", e = window.matchMedia(
      "(prefers-color-scheme: dark)"
    ).matches, n = t === "dark" ? !0 : t === "light" ? !1 : e;
    this.classList.toggle("dark", n);
  }
  /* =====================
      CHART
  ===================== */
  _loadChartJs() {
    return window.Chart ? Promise.resolve() : new Promise((t) => {
      const e = document.createElement("script");
      e.src = "https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js", e.onload = t, document.head.appendChild(e);
    });
  }
  _centerTextPlugin = {
    id: "centerText",
    afterDraw: (t) => {
      const { ctx: e, chartArea: n } = t, a = t.$centerText;
      if (!a?.length) return;
      const r = n.left + n.width / 2, s = n.top + n.height / 2;
      e.save(), e.textAlign = "center", e.textBaseline = "middle", a.forEach((o, i) => {
        e.font = o.font, e.fillStyle = o.color || "#fff", e.fillText(o.text, r, s + (i - 0.5) * 22);
      }), e.restore();
    }
  };
  _initChart() {
    this._chart = new Chart(this.$chartCanvas, {
      type: "doughnut",
      plugins: [this._centerTextPlugin],
      data: {
        labels: ["On-Page", "Technical", "Off-Page", "Reporting"],
        datasets: [
          {
            data: [0, 0, 0, 0],
            backgroundColor: [
              this._css("--chart-onpage"),
              this._css("--chart-tech"),
              this._css("--chart-offpage"),
              this._css("--chart-reporting")
            ],
            borderWidth: 0
          }
        ]
      },
      options: {
        cutout: "70%",
        plugins: { legend: !1, tooltip: !1 },
        onHover: (t, e) => {
          e.length ? this._updateCenterForSlice(e[0].index) : this._updateCenterDefault();
        }
      }
    }), this._updateCenterDefault();
  }
  _updateCenterForSlice(t) {
    const e = this._chart.data.datasets[0].data, n = e.reduce((s, o) => s + o, 0);
    if (!n) return;
    const a = Math.round(e[t] / n * 100), r = this._chart.data.labels[t];
    this._chart.$centerText = [
      { text: `${a}%`, font: "700 26px sans-serif" },
      {
        text: r,
        font: "500 18px sans-serif",
        color: "rgba(255,255,255,.8)"
      }
    ], this._chart.draw();
  }
  _updateCenterDefault() {
    this._chart.$centerText = [
      {
        text: `$${this._currentTotal.toLocaleString()}`,
        font: "700 26px sans-serif"
      },
      {
        text: "/mo",
        font: "500 16px sans-serif",
        color: "rgba(255,255,255,.8)"
      }
    ], this._chart.draw();
  }
  _updateChartColors() {
    this._chart && (this._chart.data.datasets[0].backgroundColor = [
      this._css("--chart-onpage"),
      this._css("--chart-tech"),
      this._css("--chart-offpage"),
      this._css("--chart-reporting")
    ], this._chart.update());
  }
  /* =====================
      CALCULATOR
  ===================== */
  _attachEvents() {
    [
      this.$pageUpdates,
      this.$blogs,
      this.$videos,
      this.$backlinks,
      this.$techSeo,
      this.$reporting,
      this.$contractLength
    ].forEach(
      (t) => t.addEventListener("input", () => this._updateCalculator())
    );
  }
  _updateCalculator() {
    const s = {
      1: 0,
      3: 0.05,
      6: 0.1,
      12: 0.15
    }, o = (w) => w >= 100 ? 0.1 : w >= 40 ? 0.05 : 0, i = Number(this.$pageUpdates.value) || 0, h = Number(this.$blogs.value) || 0, d = Number(this.$videos.value) || 0, p = Number(this.$backlinks.value) || 0, g = Number(this.$contractLength.value);
    let m = i * 425;
    m *= 1 - o(i);
    let u = 0;
    this.$reporting.value === "one" && (u = 1e3);
    const C = Math.round(m + u);
    this.$oneTimeCost.textContent = `$${C.toLocaleString()}`;
    const k = h * 375, $ = this.$techSeo.value === "yes" ? 600 : 0, _ = d * 675 + p * 625;
    let l = 0;
    this.$reporting.value === "monthly" && (l = 600), this.$reporting.value === "quarterly" && (l = 333);
    const c = s[g] || 0, f = Math.ceil(k * (1 - c)), b = Math.ceil($ * (1 - c)), v = Math.ceil(_ * (1 - c)), y = l > 0 ? Math.ceil(l * (1 - c)) : 0, x = f + b + v + y;
    this._currentTotal = x, this.$monthlyCost.textContent = `$${x.toLocaleString()}`, this.$pagesLabel.textContent = i > 0 ? `${i} pages` : "None", this.$blogsLabel.textContent = h > 0 ? `${h} / month` : "None", this.$videosLabel.textContent = d > 0 ? `${d} / month` : "None", this.$backlinksLabel.textContent = p > 0 ? `${p} links` : "None", this.$techLabel.textContent = this.$techSeo.value === "yes" ? "$600 / month" : "None", this.$reportingLabel.textContent = this.$reporting.value === "one" ? "One-Time ($1,000)" : this.$reporting.value === "monthly" ? "Monthly ($600 / mo)" : this.$reporting.value === "quarterly" ? "Quarterly ($333 / mo)" : "None", this.$termLabel.textContent = g === 1 ? "One Month" : `${g} Months`, this._updateChartData(f, b, v, y);
  }
  /* =====================
      CHART DATA UPDATE (RESTORED)
  ===================== */
  _updateChartData(t, e, n, a) {
    if (!this._chart) return;
    const r = [t, e, n, a];
    this._chart.data.datasets[0].data = r, this._currentTotal = t + e + n + a, this._chart.update(), this._updateCenterDefault();
  }
}
customElements.get("seo-calculator") || customElements.define(
  "seo-calculator",
  class extends E {
    connectedCallback() {
      this.shadowRoot || this.attachShadow({ mode: "open" }), this.shadowRoot.innerHTML || (this.shadowRoot.innerHTML = `
                        <style>${L}</style>
                        ${T}
                    `), super.connectedCallback();
    }
  }
);
