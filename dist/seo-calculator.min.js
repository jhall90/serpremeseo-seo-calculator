/*! seo-calculator-web-component v1.0.0 | MIT License | 2025 */
class SeoCalculator extends HTMLElement{static get observedAttributes(){return["brand-top","brand-bottom","chart-onpage","chart-tech","chart-offpage","font-family","bg-light","panel-light","text-light","bg-dark","panel-dark","text-dark","theme"]}constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=this.template,this._chart=null,this._themeAttr=this.getAttribute("theme")||"system"}get template(){return`
<style>
:host {
    /* Default theme variables (can be overridden by client or attributes) */
    --brand-top: var(--brand-top, #0e2a59);
    --brand-bottom: var(--brand-bottom, #163a7b);

    --chart-onpage: var(--chart-onpage, #00cc66);
    --chart-tech: var(--chart-tech, #ff6a00);
    --chart-offpage: var(--chart-offpage, #ffcc00);

    --font-family: var(--font-family, system-ui, sans-serif);

    /* Light theme defaults */
    --bg-light: var(--bg-light, #ffffff);
    --panel-light: var(--panel-light, #f8fafc);
    --text-light: var(--text-light, #111111);

    /* Dark theme defaults */
    --bg-dark: var(--bg-dark, #0f172a);
    --panel-dark: var(--panel-dark, #1e293b);
    --text-dark: var(--text-dark, #f1f5f9);

    display: block;
    font-family: var(--font-family);
}

.calculator {
    display: flex;
    max-width: 1100px;
    margin: 0 auto;
    border-radius: 20px;
    overflow: hidden;
    background: var(--panel-light);
    color: var(--text-light);
    padding: 30px;
}

:host(.dark) .calculator {
    background: var(--panel-dark);
    color: var(--text-dark);
}

.left-panel {
    flex: 1;
    padding-right: 30px;
}

.right-panel {
    width: 360px;
    padding: 30px;
    background: linear-gradient(180deg, var(--brand-top), var(--brand-bottom));
    color: #fff;
    border-radius: 12px;
}

.theme-toggle {
    margin-bottom: 20px;
    padding: 8px 16px;
    border-radius: 6px;
    border: 1px solid rgba(0,0,0,0.2);
    background: var(--panel-light);
    cursor: pointer;
    transition: 0.2s ease-in-out;

    font-family: inherit;      
    font-size: 14px;           
    font-weight: 500;          
    color: inherit;      
}
:host(.dark) .theme-toggle {
    background: var(--panel-dark);
    border-color: rgba(255,255,255,0.3);
    color: inherit;
}

.theme-toggle:hover {
    opacity: 0.8;
}

.input-row {
    margin-bottom: 20px;
}

label {
    font-weight: 600;
    margin-bottom: 8px;
    display: block;
}

select,
input[type="number"],
input {
    height: 46px;
    padding: 10px 12px;
    line-height: 1.4;
    border-radius: 8px;
    width: 100%;
    box-sizing: border-box;
    border: 1px solid rgba(255,255,255,0.15);
    background: var(--panel-light);
    color: inherit;
}

:host(.dark) select,
:host(.dark) input[type="number"],
:host(.dark) input {
    background: var(--panel-dark);
    border: 1px solid rgba(255,255,255,0.2);
}

/* Remove number spinner (Chrome, Edge, Safari) */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

/* Remove spinner (Firefox) */
input[type="number"] {
    -moz-appearance: textfield;
}

select, input[type="number"] {
    width: 100%;
    padding: 10px;
    border-radius: 6px;
    border: 1px solid rgba(0,0,0,0.15);
    font-size: 14px;
    background: var(--panel-light);
    color: inherit;
}
:host(.dark) select,
:host(.dark) input[type="number"] {
    background: var(--panel-dark);
    border-color: rgba(255,255,255,0.15);
    color: var(--text-dark);
}

.left-panel h1 {
    text-align: center;
}

.summary h1 {
    font-size: 32px;
    margin: 10px 0;
    text-align: center;
}

.summary h2 {
    text-align: center;
}

.summary ul {
    list-style: none;
    padding: 0;
    margin-top: 20px;
}
.summary li {
    display: flex;
    justify-content: space-between;
    padding: 4px 0;
}

canvas {
    width: 240px;
    height: 240px;
    margin: 20px auto;
}

.dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    display: inline-block;
}
.dot.onpage { background: var(--chart-onpage); }
.dot.tech { background: var(--chart-tech); }
.dot.offpage { background: var(--chart-offpage); }

.legend {
    display: flex;
    justify-content: space-around;
    margin-top: 10px;
}

///////////////////
//    TABLET
///////////////////
:host(.tablet) {
    font-size: 16px;
}

:host(.tablet) h1 {
    font-size: 22px;
    text-align: center;
}

:host(.tablet) label {
    font-size: 15px;
    font-weight: 600;
}

:host(.tablet) select,
:host(.tablet) input[type="number"] {
    font-size: 16px;
    padding: 12px;
}

:host(.tablet) .right-panel h1 {
    font-size: 28px;
    text-align: center;
}

:host(.tablet) .right-panel h2 {
    font-size: 20px;
    text-align: center;
}

:host(.tablet) .calculator {
    flex-direction: column;
    padding: 0px;
}

:host(.tablet) .right-panel,
:host(.tablet) .left-panel {
    display: flex;
    flex-direction: column;
    width: 90%;
    margin: 3vw auto;      
    padding: 1.25rem;    
}

:host(.tablet) .right-panel {
    max-width: calc(100vw - 12vw); 
}

:host(.tablet) .right-panel {
    margin-top: 0px;
}

:host(.tablet) .legend {
    font-size: small;
}

:host(.tablet) canvas {
    width: 60% !important;
    height: 60% !important;
}

///////////////////
//    MOBILE
///////////////////
:host(.mobile) {
    font-size: 16px;
}

:host(.mobile) h1 {
    font-size: 22px;
    text-align: center;
}

:host(.mobile) label {
    font-size: 15px;
    font-weight: 600;
}

:host(.mobile) select,
:host(.mobile) input[type="number"] {
    font-size: 16px;
    padding: 12px;
}

:host(.mobile) .right-panel h1 {
    font-size: 28px;
    text-align: center;
}

:host(.mobile) .right-panel h2 {
    font-size: 20px;
    text-align: center;
}

:host(.mobile) .calculator {
    flex-direction: column;
    padding: 0px;
}

:host(.mobile) .right-panel,:host(.mobile) .left-panel {
    display: flex;
    width: 90%;
    padding: 1rem;
    flex-direction: column;
}

:host(.mobile) .right-panel {
    margin-top: 20px;
}

:host(.mobile) .legend {
    font-size: small;
}

:host(.mobile) canvas {
    width: 60% !important;
    height: 60% !important;
}
</style>

<div class="calculator">
    <div class="left-panel">
        <button class="theme-toggle">Toggle Theme</button>
        <h1>SEO Pricing Calculator</h1>

        <div class="input-row">
            <label>Business Type</label>
            <select id="businessType">
                <option value="small">Small Business</option>
                <option value="mid">Mid-Size Business</option>
                <option value="enterprise">Enterprise</option>
            </select>
        </div>

        <div class="input-row">
            <label>Website Size (Total Pages)</label>
            <input type="number" id="numPages" value="20">
        </div>

        <div class="input-row">
            <label>Content Plan</label>
            <select id="contentNeed">
                <option value="none">No New Content</option>
                <option value="some">Some New Pages / Blogs</option>
                <option value="ongoing">Ongoing Content</option>
            </select>
        </div>

        <div class="input-row">
            <label>Backlink Package</label>
            <select id="backlinkPack">
                <option value="none">None</option>
                <option value="basic">Basic (3 links)</option>
                <option value="standard">Standard (6 links)</option>
                <option value="aggressive">Aggressive (10 links)</option>
            </select>
        </div>

        <div class="input-row">
            <label>Technical SEO Complexity</label>
            <select id="techComplexity">
                <option value="low">Low</option>
                <option value="medium" selected>Medium</option>
                <option value="high">High</option>
            </select>
        </div>

        <div class="input-row">
            <label>Reporting & Analytics</label>
            <select id="reportLevel">
                <option value="basic">Basic</option>
                <option value="standard" selected>Standard</option>
                <option value="premium">Premium</option>
            </select>
        </div>

        <div class="input-row">
            <label>Engagement Term</label>
            <select id="engagementTerm">
                <option value="1">1 Month (0% Off)</option>
                <option value="3">3 Months (5% Off)</option>
                <option value="6" selected>6 Months (10% Off)</option>
                <option value="12">12 Months (15% Off)</option>
            </select>
        </div>
    </div>

    <div class="right-panel">
        <div class="summary">
            <h2>Estimated Monthly Cost</h2>
            <h1 id="monthlyCost">$0</h1>
            <ul>
                <li>Business: <span id="businessTypeLabel"></span></li>
                <li>Pages: <span id="websiteSizeLabel"></span></li>
                <li>Content: <span id="contentPlanLabel"></span></li>
                <li>Backlinks: <span id="backlinkLabel"></span></li>
                <li>Tech: <span id="techLabel"></span></li>
                <li>Reporting: <span id="reportingLabel"></span></li>
                <li>Term: <span id="termLabel"></span></li>
            </ul>
        </div>

        <canvas id="paymentChart"></canvas>

        <div class="legend">
            <div><span class="dot onpage"></span> On-Page</div>
            <div><span class="dot tech"></span> Technical</div>
            <div><span class="dot offpage"></span> Off-Page</div>
        </div>
    </div>
</div>
        `}connectedCallback(){this._cacheDom(),this._readPageCssVars(),this._applyAttributeOverrides(),this._initThemeListener(),this._updateThemeClass(),this._updateResponsiveClasses(),window.addEventListener("resize",()=>this._updateResponsiveClasses()),this._loadChartJs().then(()=>{this._initChart(),this._attachEvents(),this._updateCalculator()})}_cacheDom(){const t=this.shadowRoot;this.$businessType=t.getElementById("businessType"),this.$numPages=t.getElementById("numPages"),this.$contentNeed=t.getElementById("contentNeed"),this.$backlinkPack=t.getElementById("backlinkPack"),this.$techComplexity=t.getElementById("techComplexity"),this.$reportLevel=t.getElementById("reportLevel"),this.$engagementTerm=t.getElementById("engagementTerm"),this.$monthlyCost=t.getElementById("monthlyCost"),this.$businessTypeLabel=t.getElementById("businessTypeLabel"),this.$websiteSizeLabel=t.getElementById("websiteSizeLabel"),this.$contentPlanLabel=t.getElementById("contentPlanLabel"),this.$backlinkLabel=t.getElementById("backlinkLabel"),this.$techLabel=t.getElementById("techLabel"),this.$reportingLabel=t.getElementById("reportingLabel"),this.$termLabel=t.getElementById("termLabel"),this.$chartCanvas=t.getElementById("paymentChart"),this.$themeToggle=t.querySelector(".theme-toggle")}_readPageCssVars(){const t=["--brand-top","--brand-bottom","--chart-onpage","--chart-tech","--chart-offpage","--font-family","--bg-light","--panel-light","--text-light","--bg-dark","--panel-dark","--text-dark"],e=getComputedStyle(document.documentElement);t.forEach(n=>{const a=e.getPropertyValue(n).trim();a&&this.style.setProperty(n,a)})}_applyAttributeOverrides(){[...this.attributes].forEach(t=>{const e="--"+t.name.replace(/-(.)/g,(n,a)=>a.toLowerCase());this.style.setProperty(e,t.value)})}attributeChangedCallback(){this._applyAttributeOverrides(),this._updateChartColors()}_initThemeListener(){this.$themeToggle.addEventListener("click",()=>{const t=this.getAttribute("theme")||"system",e=t==="light"?"dark":t==="dark"?"system":"light";this.setAttribute("theme",e),this._themeAttr=e,this._updateThemeClass()})}_updateThemeClass(){const t=this.getAttribute("theme")||"system",e=window.matchMedia("(prefers-color-scheme: dark)").matches,n=document.body.classList.contains("dark-mode");let a=!1;t==="dark"?a=!0:t==="light"?a=!1:a=n||e,a?this.classList.add("dark"):this.classList.remove("dark")}_loadChartJs(){return window.Chart?Promise.resolve():new Promise(t=>{const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/chart.js",e.onload=t,document.head.appendChild(e)})}_centerTextPlugin={id:"centerText",afterDraw:t=>{const{ctx:e,chartArea:{width:n,height:a}}=t,i=t.$centerText;if(!i||i.length===0)return;e.save(),e.textAlign="center",e.textBaseline="middle";const r=n/2+t.chartArea.left,s=a/2+t.chartArea.top,o=22;i.forEach((l,c)=>{e.fillStyle=l.color||"#ffffff",e.font=l.font||"600 20px sans-serif";const h=(c-(i.length-1)/2)*o;e.fillText(l.text,r,s+h)}),e.restore()}};_initChart(){const t=this.$chartCanvas.getContext("2d");this._chart=new Chart(t,{type:"doughnut",plugins:[this._centerTextPlugin],data:{labels:["On-Page","Technical","Off-Page"],datasets:[{data:[0,0,0],backgroundColor:[this._css("--chart-onpage"),this._css("--chart-tech"),this._css("--chart-offpage")],borderWidth:0}]},options:{cutout:"70%",plugins:{legend:!1,tooltip:!1},onHover:(e,n)=>{if(n.length>0){const a=n[0].index;this._updateCenterForSlice(a)}else this._updateCenterDefault()}}}),this._updateCenterDefault()}_updateCenterDefault(){const t=this._currentTotal||0;this._chart.$centerText=[{text:`$${t.toLocaleString()}`,font:"700 26px sans-serif"},{text:"/mo",font:"500 16px sans-serif",color:"rgba(255,255,255,0.8)"}],this._chart.draw()}_updateCenterForSlice(t){const e=this._chart.data.datasets[0].data,n=e.reduce((s,o)=>s+o,0),a=e[t];if(n===0)return;const i=Math.round(a/n*100),r=this._chart.data.labels[t];this._chart.$centerText=[{text:`${i}%`,font:"700 26px sans-serif"},{text:r,font:"500 18px sans-serif",color:"rgba(255,255,255,0.8)"}],this._chart.draw()}_css(t){return getComputedStyle(this).getPropertyValue(t).trim()}_updateChartColors(){this._chart&&(this._chart.data.datasets[0].backgroundColor=[this._css("--chart-onpage"),this._css("--chart-tech"),this._css("--chart-offpage")],this._chart.update())}_attachEvents(){[this.$businessType,this.$numPages,this.$contentNeed,this.$backlinkPack,this.$techComplexity,this.$reportLevel,this.$engagementTerm].forEach(t=>t.addEventListener("input",()=>this._updateCalculator()))}_updateCalculator(){const t={small:{on:25,tech:300,link:150,report:150},mid:{on:45,tech:500,link:250,report:250},enterprise:{on:75,tech:1e3,link:400,report:500}},e={none:0,basic:3,standard:6,aggressive:10},n={none:0,some:.5,ongoing:1},a={low:1,medium:1.5,high:2},i={basic:1,standard:1.5,premium:2},r={1:0,3:.05,6:.1,12:.15},s=this.$businessType.value,o=Math.max(1,Number(this.$numPages.value)||1),l=o*t[s].on,c=l*n[this.$contentNeed.value],h=l+c,p=t[s].tech*a[this.$techComplexity.value],d=t[s].link*e[this.$backlinkPack.value],u=t[s].report*i[this.$reportLevel.value];let g=h+p+d+u;g*=1-r[this.$engagementTerm.value],this.$monthlyCost.textContent="$"+Math.round(g).toLocaleString(),this.$businessTypeLabel.textContent=s,this.$websiteSizeLabel.textContent=o+" pages",this.$contentPlanLabel.textContent=this.$contentNeed.value,this.$backlinkLabel.textContent=this.$backlinkPack.value,this.$techLabel.textContent=this.$techComplexity.value,this.$reportingLabel.textContent=this.$reportLevel.value,this.$termLabel.textContent=this.$engagementTerm.value+" months",this._updateChartData(h,p,d)}_updateChartData(t,e,n){const a=[t,e,n];this._chart.data.datasets[0].data=a,this._currentTotal=t+e+n,this._chart.update(),this._updateCenterDefault()}_updateResponsiveClasses(){const t=window.innerWidth,n=window.innerHeight>t,a=t<=550,i=t>550&&t<=1024;if(this.classList.remove("mobile","tablet"),a){this.classList.add("mobile");return}if(i&&n){this.classList.add("tablet");return}}}customElements.define("seo-calculator",SeoCalculator);
